var e=Object.defineProperty,t=(t,r,i)=>((t,r,i)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i)(t,"symbol"!=typeof r?r+"":r,i);import{r,g as i}from"./phaser-CLYd3JIB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const s=i(r()),o=class e{constructor(){t(this,"STORAGE_KEY","wao_leaderboard")}static getInstance(){return e.instance||(e.instance=new e),e.instance}getScores(){const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];try{return JSON.parse(e).sort(((e,t)=>t.score-e.score))}catch(t){return console.error("Failed to parse leaderboard data",t),[]}}saveScore(e,t){e&&""!==e.trim()||(e="Anonymous");const r=this.getScores();r.push({name:e.trim(),score:t,date:Date.now()});const i=r.sort(((e,t)=>t.score-e.score)).slice(0,10);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i))}};t(o,"instance");let a=o;class n{static render(e,t,r,i){const s=e.add.container(t,r),o=a.getInstance().getScores(),n=Math.floor(.08*i),l=Math.floor(.05*i),c=1.5*l,u=e.add.text(0,0,"LEADERBOARD",{fontSize:`${n}px`,color:"#00ffff",fontStyle:"bold"}).setOrigin(.5);if(s.add(u),0===o.length){const t=e.add.text(0,c,"No scores yet!",{fontSize:`${l}px`,color:"#888888"}).setOrigin(.5);s.add(t)}else o.slice(0,5).forEach(((t,r)=>{const o=c+r*c,a=e.add.text(-i/3,o,`${r+1}. ${t.name}`,{fontSize:`${l}px`,color:"#ffffff"}).setOrigin(0,.5),n=e.add.text(i/3,o,`${t.score}`,{fontSize:`${l}px`,color:"#00ff00"}).setOrigin(1,.5);s.add([a,n])}));return s}}class l extends s.Scene{constructor(){super("MainMenuScene")}preload(){this.load.setPath("public/assets"),this.load.setPath("assets"),this.load.audio("menu-hover","audio/menu-hover.wav"),this.load.audio("menu-select","audio/menu-select.wav"),this.load.audio("game-start","audio/game-start.wav"),this.load.audio("back-cancel","audio/back-cancel.wav"),this.load.audio("instruction-reveal","audio/instruction-reveal.wav"),this.load.audio("grid-item-spawn","audio/grid-item-spawn.wav"),this.load.audio("timer-tick","audio/timer-tick.wav"),this.load.audio("timer-low-warning","audio/timer-low-warning.wav"),this.load.audio("timeout","audio/timeout.wav"),this.load.audio("correct","audio/correct.wav"),this.load.audio("incorrect","audio/incorrect.wav"),this.load.audio("life-lost","audio/life-lost.wav"),this.load.audio("level-up","audio/level-up.wav"),this.load.audio("game-over","audio/game-over.wav"),this.load.audio("high-score","audio/high-score.wav"),this.load.audio("restart","audio/restart.wav")}create(){const e=this.cameras.main.width,t=this.cameras.main.height;this.scene.isActive("BorderOverlayScene")?this.game.events.emit("timer-reset"):this.scene.launch("BorderOverlayScene"),this.add.text(e/2,.25*t,"Wrong Answers Only",{fontSize:`${Math.floor(.08*e)}px`,color:"#ffffff",fontStyle:"bold",align:"center",wordWrap:{width:.8*e}}).setOrigin(.5),n.render(this,e/2,.55*t,.8*e);const r=.6*e,i=.06*t,o=this.add.rectangle(e/2,.85*t,r,i,65280).setInteractive({useHandCursor:!0});this.add.text(e/2,.85*t,"PLAY",{fontSize:`${Math.floor(.45*i)}px`,color:"#000000"}).setOrigin(.5),o.on("pointerdown",(()=>{this.sound instanceof s.Sound.WebAudioSoundManager&&"suspended"===this.sound.context.state&&this.sound.context.resume(),this.sound.play("game-start"),this.scene.start("GameScene")})),o.on("pointerover",(()=>{o.fillColor=56576})),o.on("pointerout",(()=>{o.fillColor=65280}))}}const c=JSON.parse('[{"id":1,"instruction":"Tap the apple","theme":"","failure":"","level":0,"options":[{"text":"banana","isCorrect":true}]},{"id":2,"instruction":"I can fly all by myself","theme":"","failure":"Rocks don\'t fly on their own!","level":1,"options":[{"text":"bird","isCorrect":false},{"text":"rock","isCorrect":true}]},{"id":3,"instruction":"2+2=","theme":"","failure":"","level":1,"options":[{"text":"37","isCorrect":true},{"text":"4","isCorrect":false}]},{"id":4,"instruction":"Punch the bully","theme":"","failure":"","level":1,"options":[{"text":"boy","isCorrect":true},{"text":"girl","isCorrect":true},{"text":"thug","isCorrect":false}]},{"id":5,"instruction":"Eat me","theme":"","failure":"","level":1,"options":[{"text":"cake","isCorrect":false},{"text":"rake","isCorrect":true}]},{"id":6,"instruction":"Rhyming words","theme":"","failure":"","level":2,"options":[{"text":"orange","isCorrect":true},{"text":"ball","isCorrect":false},{"text":"saw","isCorrect":false},{"text":"macaw","isCorrect":false}]},{"id":7,"instruction":"Rhymes with orange","theme":"","failure":"","level":0,"options":[{"text":"cat","isCorrect":true}]},{"id":8,"instruction":"Bees make...","theme":"","failure":"","level":2,"options":[{"text":"honey","isCorrect":false},{"text":"motor oil","isCorrect":true}]},{"id":9,"instruction":"How many fingers am I holding up? (2)","theme":"","failure":"","level":0,"options":[{"text":"3","isCorrect":true}]},{"id":10,"instruction":"Dig a hole!","theme":"","failure":"","level":2,"options":[{"text":"shovel","isCorrect":false},{"text":"jack-hammer","isCorrect":false},{"text":"spoon","isCorrect":false},{"text":"tv remote","isCorrect":true}]},{"id":11,"instruction":"Pi","theme":"","failure":"","level":2,"options":[{"text":"3.14","isCorrect":false},{"text":"Apple","isCorrect":true}]},{"id":12,"instruction":"Star spangled banner","theme":"","failure":"","level":2,"options":[{"text":"Flag","isCorrect":false},{"text":"Rocket","isCorrect":false},{"text":"Eagle","isCorrect":true}]},{"id":13,"instruction":"peace sign","theme":"","failure":"","level":2,"options":[{"text":"peace","isCorrect":false},{"text":"piece","isCorrect":true}]},{"id":14,"instruction":"Lead","theme":"","failure":"","level":2,"options":[{"text":"<leader>","isCorrect":false},{"text":"metal","isCorrect":false},{"text":"<bike>","isCorrect":true}]},{"id":15,"instruction":"Wind","theme":"","failure":"","level":3,"options":[{"text":"<windmill>","isCorrect":false},{"text":"<crank>","isCorrect":false},{"text":"<monkey>","isCorrect":true},{"text":"<hurricane>","isCorrect":false}]},{"id":16,"instruction":"Tap the circle","theme":"","failure":"","level":2,"options":[{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"circle","isCorrect":false},{"text":"square","isCorrect":true}]},{"id":17,"instruction":"I\'m a blue circle","theme":"","failure":"","level":2,"options":[{"text":"red circle","isCorrect":true},{"text":"blue square","isCorrect":true},{"text":"blue square","isCorrect":true},{"text":"blue circle","isCorrect":false},{"text":"blue rectangle","isCorrect":true},{"text":"blue triangle","isCorrect":true}]},{"id":18,"instruction":"Tap the circle","theme":"","failure":"","level":2,"options":[{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"square","isCorrect":true},{"text":"circle","isCorrect":true}]},{"id":19,"instruction":"Don\'t tap the circle","theme":"","failure":"","level":2,"options":[{"text":"The circle","isCorrect":true},{"text":"<square>","isCorrect":false}]},{"id":20,"instruction":"If you live in chicago, you live in...","theme":"","failure":"","level":2,"options":[{"text":"The Windy City","isCorrect":false},{"text":"Chicago","isCorrect":false},{"text":"Cleveland","isCorrect":true},{"text":"Illinios","isCorrect":false}]},{"id":21,"instruction":"You can drive this","theme":"","failure":"","level":2,"options":[{"text":"Car","isCorrect":false},{"text":"Motorcycle ","isCorrect":false},{"text":"Boat","isCorrect":false},{"text":"Wheel","isCorrect":true}]},{"id":22,"instruction":"Venomous","theme":"","failure":"","level":3,"options":[{"text":"black widow","isCorrect":false},{"text":"python","isCorrect":true},{"text":"tarantula","isCorrect":false},{"text":"scorpion","isCorrect":false}]},{"id":23,"instruction":"Caret","theme":"","failure":"","level":2,"options":[{"text":"diamond","isCorrect":false},{"text":"carrot","isCorrect":false},{"text":"^","isCorrect":false},{"text":"cucumber","isCorrect":true}]},{"id":24,"instruction":"Tap the cell","theme":"","failure":"","level":2,"options":[{"text":"mobile phone","isCorrect":false},{"text":"prison cell","isCorrect":false},{"text":"dna helix","isCorrect":true}]},{"id":25,"instruction":"The Garden State","theme":"","failure":"","level":2,"options":[{"text":"California","isCorrect":true},{"text":"New Jersey","isCorrect":false}]},{"id":26,"instruction":"Rhymes with...","theme":"","failure":"","level":2,"options":[{"text":"bass","isCorrect":false},{"text":"car","isCorrect":true},{"text":"face","isCorrect":false},{"text":"space","isCorrect":false}]},{"id":27,"instruction":"The correct spelling is...","theme":"","failure":"","level":2,"options":[{"text":"misspell","isCorrect":false},{"text":"restaurant","isCorrect":false},{"text":"anniversary","isCorrect":false},{"text":"accomodate","isCorrect":true}]},{"id":28,"instruction":"Eat me","theme":"","failure":"","level":2,"options":[{"text":"Pie ","isCorrect":false},{"text":"pi","isCorrect":true},{"text":"cake","isCorrect":false}]},{"id":29,"instruction":"Got bark?","theme":"","failure":"","level":2,"options":[{"text":"tree","isCorrect":false},{"text":"dog","isCorrect":false},{"text":"squirrel","isCorrect":true}]},{"id":30,"instruction":"Something fun to watch","theme":"","failure":"","level":2,"options":[{"text":"drying paint","isCorrect":true},{"text":"tv","isCorrect":false},{"text":"movie","isCorrect":false}]},{"id":31,"instruction":"I am a","theme":"","failure":"","level":2,"options":[{"text":"boy","isCorrect":false},{"text":"girl","isCorrect":false},{"text":"capybara","isCorrect":true}]},{"id":32,"instruction":"Open this","theme":"","failure":"","level":2,"options":[{"text":"package","isCorrect":false},{"text":"door","isCorrect":false},{"text":"room","isCorrect":true}]},{"id":33,"instruction":"Something you have 10 of","theme":"","failure":"","level":2,"options":[{"text":"hands","isCorrect":true},{"text":"fingers","isCorrect":false},{"text":"toes","isCorrect":false}]},{"id":34,"instruction":"Tap something you wear","theme":"","failure":"","level":1,"options":[{"text":"watch","isCorrect":false},{"text":"socks","isCorrect":false},{"text":"pants","isCorrect":false},{"text":"clothes hanger","isCorrect":true}]},{"id":35,"instruction":"Things to tie","theme":"","failure":"","level":1,"options":[{"text":"chainsaw","isCorrect":true},{"text":"shoes","isCorrect":false},{"text":"string","isCorrect":false},{"text":"rope","isCorrect":false}]},{"id":36,"instruction":"Something yellow","theme":"","failure":"","level":1,"options":[{"text":"lime","isCorrect":true},{"text":"banana","isCorrect":false},{"text":"lemon","isCorrect":false},{"text":"daffodil","isCorrect":false}]},{"id":37,"instruction":"very bouncy","theme":"","failure":"","level":1,"options":[{"text":"soccer ball","isCorrect":false},{"text":"basketball","isCorrect":false},{"text":"trampoline","isCorrect":false},{"text":"bowling ball","isCorrect":true}]},{"id":38,"instruction":"holds water","theme":"","failure":"","level":1,"options":[{"text":"lake","isCorrect":false},{"text":"planet","isCorrect":false},{"text":"strainer","isCorrect":true}]},{"id":39,"instruction":"Sit on this","theme":"","failure":"","level":1,"options":[{"text":"chair","isCorrect":false},{"text":"floor","isCorrect":false},{"text":"ceiling","isCorrect":true}]},{"id":40,"instruction":"My hair is","theme":"","failure":"","level":1,"options":[{"text":"short","isCorrect":false},{"text":"long","isCorrect":false},{"text":"gone","isCorrect":false},{"text":"pizza","isCorrect":true}]},{"id":41,"instruction":"I am afraid of","theme":"","failure":"","level":1,"options":[{"text":"monsters","isCorrect":false},{"text":"ghosts","isCorrect":false},{"text":"automatic doors","isCorrect":true}]},{"id":42,"instruction":"Found in the kitchen","theme":"","failure":"","level":1,"options":[{"text":"spork","isCorrect":false},{"text":"cork","isCorrect":false},{"text":"fork","isCorrect":false},{"text":"dork","isCorrect":true}]},{"id":43,"instruction":"Unlocks things","theme":"","failure":"","level":1,"options":[{"text":"keypad","isCorrect":false},{"text":"house key","isCorrect":false},{"text":"car remote","isCorrect":false},{"text":"password","isCorrect":false},{"text":"sail boat","isCorrect":true}]},{"id":44,"instruction":"Has a screen","theme":"","failure":"","level":1,"options":[{"text":"window","isCorrect":false},{"text":"laptop","isCorrect":false},{"text":"phone","isCorrect":false},{"text":"table","isCorrect":true}]},{"id":45,"instruction":"Something you close","theme":"","failure":"","level":1,"options":[{"text":"app","isCorrect":false},{"text":"drawer","isCorrect":false},{"text":"book","isCorrect":false},{"text":"wall","isCorrect":true}]},{"id":46,"instruction":"Shiny","theme":"","failure":"","level":1,"options":[{"text":"bald head","isCorrect":false},{"text":"bald eagle","isCorrect":true},{"text":"silver paint","isCorrect":false},{"text":"disco ball","isCorrect":false}]},{"id":47,"instruction":"You pick this","theme":"","failure":"","level":1,"options":[{"text":"nose","isCorrect":false},{"text":"berries","isCorrect":false},{"text":"parents","isCorrect":true},{"text":"apples","isCorrect":false}]},{"id":48,"instruction":"Which has length","theme":"","failure":"","level":1,"options":[{"text":"line","isCorrect":false},{"text":"square","isCorrect":false},{"text":"point","isCorrect":true},{"text":"ruler","isCorrect":false}]},{"id":49,"instruction":"Fun pet","theme":"","failure":"","level":1,"options":[{"text":"monkey","isCorrect":false},{"text":"shark","isCorrect":true}]},{"id":50,"instruction":"What you get for Halloween","theme":"","failure":"","level":1,"options":[{"text":"candy","isCorrect":false},{"text":"trick","isCorrect":true},{"text":"treat","isCorrect":false},{"text":"puppy","isCorrect":true}]},{"id":51,"instruction":"A stitch in time saves...","theme":"","failure":"","level":1,"options":[{"text":"nine","isCorrect":false},{"text":"butter","isCorrect":true}]},{"id":52,"instruction":"A penny saved is a penny...","theme":"","failure":"","level":1,"options":[{"text":"earned","isCorrect":false},{"text":"eaten","isCorrect":true}]},{"id":53,"instruction":"Spell wrong","theme":"","failure":"","level":1,"options":[{"text":"wrong","isCorrect":false},{"text":"rong","isCorrect":true}]},{"id":54,"instruction":"Something big","theme":"","failure":"","level":1,"options":[{"text":"skyscraper","isCorrect":false},{"text":"red","isCorrect":true}]},{"id":55,"instruction":"It\'s red","theme":"","failure":"","level":1,"options":[{"text":"strawberry","isCorrect":false},{"text":"blue","isCorrect":true},{"text":"stop sign","isCorrect":false}]},{"id":56,"instruction":"Screwdriver","theme":"","failure":"","level":1,"options":[{"text":"orange juice","isCorrect":false},{"text":"screw","isCorrect":false},{"text":"bolt","isCorrect":true}]},{"id":57,"instruction":"Rock or Roll","theme":"","failure":"","level":1,"options":[{"text":"Rolling Stones","isCorrect":false},{"text":"Kaiser","isCorrect":false},{"text":"Yanni","isCorrect":true}]},{"id":58,"instruction":"It\'s so big!","theme":"","failure":"","level":1,"options":[{"text":"chipmunk","isCorrect":true},{"text":"schoolbus","isCorrect":false},{"text":"whale","isCorrect":false}]},{"id":59,"instruction":"Eat your veggies","theme":"","failure":"","level":1,"options":[{"text":"tomato","isCorrect":true},{"text":"brocolli","isCorrect":false},{"text":"lettuce","isCorrect":false}]},{"id":60,"instruction":"Giant robot!","theme":"","failure":"","level":1,"options":[{"text":"Voltron","isCorrect":false},{"text":"Optimus Prime","isCorrect":false},{"text":"Remoulade","isCorrect":true}]},{"id":61,"instruction":"Figuring out when to use they\'re, their, or there","theme":"","failure":"","level":1,"options":[{"text":"Love it","isCorrect":false},{"text":"Hate it","isCorrect":true}]},{"id":62,"instruction":"An engine has...","theme":"","failure":"","level":1,"options":[{"text":"pistons","isCorrect":false},{"text":"spark plug","isCorrect":false},{"text":"centrifuge","isCorrect":true}]},{"id":63,"instruction":"I like to drink","theme":"","failure":"","level":1,"options":[{"text":"baking soda","isCorrect":true},{"text":"ginger ale","isCorrect":false},{"text":"ginger beer","isCorrect":false}]},{"id":64,"instruction":"President","theme":"","failure":"","level":1,"options":[{"text":"Cleveland","isCorrect":false},{"text":"Franklin","isCorrect":true},{"text":"Paul Revere","isCorrect":true},{"text":"Obama","isCorrect":false}]},{"id":65,"instruction":"Don\'t pet me","theme":"","failure":"","level":1,"options":[{"text":"rattlesnake","isCorrect":false},{"text":"fluffy bunny","isCorrect":true},{"text":"Teddy bear","isCorrect":true}]},{"id":66,"instruction":"I\'m an astronaut","theme":"","failure":"","level":1,"options":[{"text":"Lance Amstrong","isCorrect":true},{"text":"Neil Armstrong","isCorrect":false}]},{"id":67,"instruction":"They are","theme":"","failure":"","level":1,"options":[{"text":"They\'re","isCorrect":false},{"text":"There","isCorrect":true},{"text":"Their","isCorrect":true}]},{"id":68,"instruction":"It\'s","theme":"","failure":"","level":3,"options":[{"text":"It is","isCorrect":false},{"text":"It has","isCorrect":false},{"text":"Belongs to it","isCorrect":true}]},{"id":69,"instruction":"Pop or star","theme":"","failure":"","level":1,"options":[{"text":"Bruno Mars","isCorrect":false},{"text":"The moon","isCorrect":true},{"text":"Ziggy Stardust","isCorrect":false}]},{"id":70,"instruction":"These can have bugs","theme":"","failure":"","level":3,"options":[{"text":"Computers","isCorrect":false},{"text":"Your bed","isCorrect":false},{"text":"My shed","isCorrect":false},{"text":"Elmer Fudd","isCorrect":true}]},{"id":71,"instruction":"Has keys","theme":"","failure":"","level":3,"options":[{"text":"Piano","isCorrect":false},{"text":"Typewriter","isCorrect":false},{"text":"Janitor","isCorrect":false},{"text":"Florida","isCorrect":false},{"text":"Anvil","isCorrect":true}]},{"id":72,"instruction":"CAPTCHA","theme":"","failure":"","level":1,"options":[{"text":"I am human","isCorrect":false},{"text":"I am not human","isCorrect":true}]}]');class u{constructor(){t(this,"questions"),t(this,"currentLevelQuestions",[]),t(this,"currentQuestionIndex",-1),this.questions=c}getQuestionsForLevel(e){const t=this.questions.filter((t=>t.level===e));return this.shuffleArray(t)}getNextQuestion(e){if(0===this.currentLevelQuestions.length||this.currentLevelQuestions[0].level!==e?(this.currentLevelQuestions=this.getQuestionsForLevel(e),this.currentQuestionIndex=0):this.currentQuestionIndex++,this.currentQuestionIndex>=this.currentLevelQuestions.length)return null;const t=this.currentLevelQuestions[this.currentQuestionIndex];return{...t,options:this.shuffleOptions(t.options)}}getMaxLevel(){return 0===this.questions.length?0:Math.max(...this.questions.map((e=>e.level)))}shuffleOptions(e){const t=[...e];return this.shuffleArray(t)}shuffleArray(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}}const h=class e{constructor(){t(this,"score",0),t(this,"lives",3),t(this,"currentLevel",0),t(this,"hasSavedScore",!1),t(this,"questionManager"),t(this,"correctAnswersInLevel",0),t(this,"requiredCorrectForNextLevel",1),this.questionManager=new u,this.resetGame()}static getInstance(){return e.instance||(e.instance=new e),e.instance}resetGame(){this.score=0,this.lives=e.MAX_LIVES,this.currentLevel=0,this.correctAnswersInLevel=0,this.hasSavedScore=!1,this.updateRequiredCorrect()}getNextQuestion(){this.correctAnswersInLevel>=this.requiredCorrectForNextLevel&&(this.currentLevel++,this.correctAnswersInLevel=0,this.updateRequiredCorrect());let e=this.questionManager.getNextQuestion(this.currentLevel);if(!e){const e=this.questionManager.getMaxLevel();return this.currentLevel<e?(this.currentLevel++,this.correctAnswersInLevel=0,this.updateRequiredCorrect(),this.getNextQuestion()):null}return e}handleAnswer(t,r){if(t){const t=Math.max(1,Math.round(r));this.score+=e.SCORE_MULTIPLIER*t,this.correctAnswersInLevel++}else this.lives--}isGameOver(){return this.lives<=0}updateRequiredCorrect(){this.requiredCorrectForNextLevel=this.getPrime(this.currentLevel)}getPrime(e){let t=-1,r=1;for(;t<e;)r++,this.isPrime(r)&&t++;return r}isPrime(e){if(e<=1)return!1;if(2===e)return!0;if(e%2==0)return!1;for(let t=3;t*t<=e;t+=2)if(e%t==0)return!1;return!0}};t(h,"instance"),t(h,"MAX_LIVES",3),t(h,"SECONDS_TO_GUESS",5),t(h,"SCORE_MULTIPLIER",100);let d=h;class f extends s.Scene{constructor(){super("GameScene"),t(this,"gameManager"),t(this,"scoreText"),t(this,"livesText"),t(this,"instructionText"),t(this,"instructionText"),t(this,"optionsContainer"),t(this,"currentTimerValue",0),t(this,"isInputLocked",!1),t(this,"lastTimerInt",0),t(this,"TIMER_MAX",5),this.gameManager=d.getInstance()}create(){const e=this.cameras.main.width,t=this.cameras.main.height,r=Math.floor(.045*e);this.scoreText=this.add.text(.03*e,.02*t,"Score: 0",{fontSize:`${r}px`,color:"#00ff00"}),this.livesText=this.add.text(.97*e,.02*t,"Lives: 3",{fontSize:`${r}px`,color:"#ff0000"}).setOrigin(1,0),this.instructionText=this.add.text(e/2,.2*t,"",{fontSize:`${Math.floor(.07*e)}px`,color:"#ffffff",align:"center",wordWrap:{width:.9*e}}).setOrigin(.5),this.optionsContainer=this.add.container(e/2,.65*t),this.scene.isActive("BorderOverlayScene")||this.scene.launch("BorderOverlayScene"),this.startNewRound()}update(e,t){this.currentTimerValue>0&&!this.isInputLocked&&(this.currentTimerValue-=t/1e3,this.currentTimerValue<=0?this.handleTimeout():this.updateTimerVisuals())}startNewRound(){if(this.gameManager.isGameOver())return this.sound.play("game-over"),void this.scene.start("GameOverScene");const e=this.gameManager.getNextQuestion();e?(this.setupQuestionUI(e),this.sound.play("instruction-reveal"),this.sound.play("grid-item-spawn"),this.scoreText.setText(`Score: ${this.gameManager.score}`),this.livesText.setText(`Lives: ${this.gameManager.lives}`),this.currentTimerValue=this.TIMER_MAX,this.isInputLocked=!1,this.game.events.emit("timer-start")):this.scene.start("GameOverScene")}setupQuestionUI(e){const t=this.cameras.main.width,r=this.cameras.main.height;this.instructionText.setText(e.instruction),this.optionsContainer.removeAll(!0);const i=e.options,s=.28*t,o=.4*r/3,a=.23*t;i.forEach(((e,t)=>{const r=Math.floor(t/3),i=(t%3-1)*s,n=(r-1)*o,l=this.add.rectangle(i,n,a,a,6710886).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.handleOptionSelected(e.isCorrect,l))),c=this.add.text(i,n,e.text,{fontSize:`${Math.floor(.2*a)}px`,color:"#ffffff",wordWrap:{width:.9*a},align:"center"}).setOrigin(.5);this.optionsContainer.add([l,c])}))}updateTimerVisuals(){const e=1-Math.max(0,this.currentTimerValue)/this.TIMER_MAX;this.game.events.emit("timer-update",e);const t=Math.ceil(this.currentTimerValue);t<this.lastTimerInt&&t>0&&(this.currentTimerValue,this.sound.play("timer-tick")),this.lastTimerInt=Math.ceil(this.currentTimerValue),this.currentTimerValue}handleOptionSelected(e,t){this.isInputLocked||(this.isInputLocked=!0,t.fillColor=e?65280:16711680,this.gameManager.handleAnswer(e,this.currentTimerValue),e?this.sound.play("correct"):(this.sound.play("incorrect"),this.sound.play("life-lost")),this.time.delayedCall(1500,(()=>{this.gameManager.isGameOver()?this.scene.start("GameOverScene"):this.startNewRound()})))}handleTimeout(){this.isInputLocked||(this.isInputLocked=!0,this.gameManager.handleAnswer(!1,0),this.sound.play("timeout"),this.sound.play("life-lost"),this.instructionText.setText("TIME'S UP!"),this.time.delayedCall(1500,(()=>{this.gameManager.isGameOver()?this.scene.start("GameOverScene"):this.startNewRound()})))}}class x extends s.Scene{constructor(){super("GameOverScene")}create(){const e=d.getInstance(),t=a.getInstance(),r=this.cameras.main.width,i=this.cameras.main.height;if(this.add.text(r/2,.3*i,"GAME OVER",{fontSize:`${Math.floor(.12*r)}px`,color:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(r/2,.25*i,`Final Score: ${e.score}`,{fontSize:`${Math.floor(.08*r)}px`,color:"#ffffff"}).setOrigin(.5),!e.hasSavedScore&&e.score>0){const s=.5*r,o=.05*i,a=this.add.rectangle(r/2,.35*i,s,o,4473924).setInteractive({useHandCursor:!0}),n=this.add.text(r/2,.35*i,"SAVE SCORE",{fontSize:`${Math.floor(.5*o)}px`,color:"#ffffff"}).setOrigin(.5);a.on("pointerdown",(()=>{const r=window.prompt("Enter your name:","Player 1");null!==r&&(t.saveScore(r,e.score),e.hasSavedScore=!0,a.destroy(),n.destroy(),this.sound.play("high-score"),this.scene.restart())}))}n.render(this,r/2,.5*i,.8*r);const s=.6*r,o=.08*i,l=this.add.rectangle(r/2,.85*i,s,o,65280).setInteractive({useHandCursor:!0});this.add.text(r/2,.85*i,"RESTART",{fontSize:`${Math.floor(.45*o)}px`,color:"#000000"}).setOrigin(.5),l.on("pointerdown",(()=>{this.sound.play("restart"),e.resetGame(),this.scene.start("GameScene")}))}}class C extends s.Scene{constructor(){super("BorderOverlayScene"),t(this,"topBorder"),t(this,"bottomBorder"),t(this,"leftBorder"),t(this,"rightBorder"),t(this,"COLOR_START",3132858),t(this,"COLOR_END",15644974)}create(){const e=this.cameras.main.width,t=this.cameras.main.height,r=Math.ceil(.02*e);this.topBorder=this.add.rectangle(e/2,r/2,e,r,this.COLOR_START),this.bottomBorder=this.add.rectangle(e/2,t-r/2,e,r,this.COLOR_START),this.leftBorder=this.add.rectangle(r/2,t/2,r,t,this.COLOR_START),this.rightBorder=this.add.rectangle(e-r/2,t/2,r,t,this.COLOR_START),this.game.events.on("timer-start",this.handleTimerStart,this),this.game.events.on("timer-update",this.handleTimerUpdate,this),this.game.events.on("timer-reset",this.handleTimerReset,this),this.scale.on("resize",this.handleResize,this),this.handleTimerReset()}handleResize(e){const t=e.width,r=e.height,i=Math.ceil(.02*t);this.topBorder.setPosition(t/2,i/2).setSize(t,i),this.bottomBorder.setPosition(t/2,r-i/2).setSize(t,i),this.leftBorder.setPosition(i/2,r/2).setSize(i,r),this.rightBorder.setPosition(t-i/2,r/2).setSize(i,r)}handleTimerStart(){this.leftBorder.setVisible(!1),this.rightBorder.setVisible(!1),this.bottomBorder.setVisible(!1),this.updateBorderColor(0)}handleTimerUpdate(e){this.cameras.main.width;const t=this.cameras.main.height*e;this.leftBorder.setVisible(!0),this.leftBorder.height=t,this.leftBorder.y=t/2,this.leftBorder.setOrigin(.5,0),this.leftBorder.y=0,this.leftBorder.height=t,this.rightBorder.setVisible(!0),this.rightBorder.setOrigin(.5,0),this.rightBorder.y=0,this.rightBorder.height=t,e>=.99?this.bottomBorder.setVisible(!0):this.bottomBorder.setVisible(!1),this.updateBorderColor(e)}handleTimerReset(){this.leftBorder.setVisible(!0).setOrigin(.5,.5),this.rightBorder.setVisible(!0).setOrigin(.5,.5),this.bottomBorder.setVisible(!0),this.topBorder.setVisible(!0);const e=this.cameras.main.height;this.leftBorder.height=e,this.leftBorder.y=e/2,this.rightBorder.height=e,this.rightBorder.y=e/2,this.cameras.main.width,this.setAllColors(this.COLOR_START)}updateBorderColor(e){const t=s.Display.Color.Interpolate.ColorWithColor(s.Display.Color.ValueToColor(this.COLOR_START),s.Display.Color.ValueToColor(this.COLOR_END),100,100*e),r=s.Display.Color.GetColor(t.r,t.g,t.b);this.setAllColors(r)}setAllColors(e){this.topBorder.fillColor=e,this.bottomBorder.fillColor=e,this.leftBorder.fillColor=e,this.rightBorder.fillColor=e}}const m={type:s.AUTO,width:1080,height:2484,parent:"game-container",backgroundColor:"#028af8",scale:{mode:s.Scale.RESIZE,autoCenter:s.Scale.CENTER_BOTH},scene:[l,f,x,C]};document.addEventListener("DOMContentLoaded",(()=>{new s.Game({...m,parent:"game-container"})}));
